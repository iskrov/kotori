# [10-11] Create ShareScreen main container

## Description
Build the main ShareScreen component that serves as the container for all sharing functionality. This screen provides a simple, intuitive interface for selecting time periods, choosing templates, and initiating the share process.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-27 17:10:00 | Created | N/A | Proposed | Task created | ai-agent |

## Requirements

### Functional Requirements
- Display period selector (Daily/Weekly/Monthly)
- Show available share templates
- Provide "Generate Share" action
- Display share history link
- Handle loading and error states

### Technical Requirements
- React Native functional component
- TypeScript with proper typing
- Reuse existing UI components
- Responsive layout
- Maintain app's visual consistency

## Implementation Plan

### 1. Component Structure
```typescript
// frontend/src/screens/ShareScreen/index.tsx
import React, { useState, useEffect } from 'react';
import { View, ScrollView, Text } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { useTheme } from '../../hooks/useTheme';
import { PeriodSelector } from './components/PeriodSelector';
import { TemplateList } from './components/TemplateList';
import { Button } from '../../components/Button';
import styles from './ShareScreen.styles';

export const ShareScreen: React.FC = () => {
  const [period, setPeriod] = useState<'daily' | 'weekly' | 'monthly'>('weekly');
  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);
  const [dateRange, setDateRange] = useState<{ start: Date; end: Date }>();
  const theme = useTheme();

  const handleGenerateShare = () => {
    // Navigate to preview screen
  };

  return (
    <SafeAreaView style={styles.container}>
      <ScrollView showsVerticalScrollIndicator={false}>
        <View style={styles.header}>
          <Text style={[styles.title, { color: theme.colors.text }]}>
            Share Summary
          </Text>
          <Text style={[styles.subtitle, { color: theme.colors.textSecondary }]}>
            Create a summary to share with your care team
          </Text>
        </View>

        <PeriodSelector
          value={period}
          onChange={setPeriod}
          onDateRangeChange={setDateRange}
        />

        <TemplateList
          selectedId={selectedTemplate}
          onSelect={setSelectedTemplate}
        />

        <View style={styles.actions}>
          <Button
            title="Generate Share"
            onPress={handleGenerateShare}
            disabled={!selectedTemplate || !dateRange}
            variant="primary"
          />
          
          <Button
            title="View History"
            onPress={() => {/* Navigate to history */}}
            variant="text"
          />
        </View>
      </ScrollView>
    </SafeAreaView>
  );
};
```

### 2. Layout Structure
```
ShareScreen
├── Header
│   ├── Title: "Share Summary"
│   └── Subtitle: Helper text
├── Period Selector
│   └── Tabs: Daily | Weekly | Monthly
├── Date Display
│   └── Selected range (e.g., "Jan 20-26, 2025")
├── Template List
│   ├── Template Card 1
│   ├── Template Card 2
│   └── Template Card 3
└── Actions
    ├── Generate Share (Primary)
    └── View History (Secondary)
```

### 3. State Management
- Local state for UI selections
- API hooks for data fetching
- Navigation params for deep linking
- Persist last used template preference

### 4. Styling Approach
```typescript
// ShareScreen.styles.ts
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#FAFAFA', // Match app background
  },
  header: {
    paddingHorizontal: 20,
    paddingVertical: 16,
  },
  title: {
    fontSize: 24,
    fontWeight: '600',
    marginBottom: 4,
  },
  subtitle: {
    fontSize: 14,
    opacity: 0.7,
  },
  actions: {
    padding: 20,
    gap: 12,
  }
});
```

## Test Plan

### Unit Tests
- Component renders without errors
- Period selection updates state
- Template selection updates state
- Generate button enables/disables correctly
- Navigation to preview works

### Integration Tests
- Data loads from API
- Error states display correctly
- Loading states show appropriately
- Deep linking works
- Orientation changes handled

### UI Tests
- Visual consistency with app
- Responsive on all screen sizes
- Smooth scrolling
- Touch targets adequate size
- Accessibility compliant

## Verification

### Success Criteria
- [ ] Screen renders with all sections
- [ ] Period selector functional
- [ ] Templates load and display
- [ ] Generate button works when valid
- [ ] History navigation works
- [ ] Matches app design system
- [ ] No performance issues

### Edge Cases
- No templates available
- No journal entries in period
- Network offline
- Very long template names
- Many templates (scrolling)

## Files Modified
- `frontend/src/screens/ShareScreen/index.tsx` (new)
- `frontend/src/screens/ShareScreen/ShareScreen.styles.ts` (new)
- `frontend/src/screens/ShareScreen/types.ts` (new)
- `frontend/src/screens/index.ts` (export addition)

## Dependencies
- PeriodSelector component (10-12)
- TemplateList component (10-13)
- Existing Button component
- Theme hook
- Navigation setup (10-10)

## Notes
- Keep the UI simple and focused
- Reuse existing components where possible
- Maintain consistent spacing and typography
- Consider adding help tooltip for first-time users
- Prepare for offline template caching

