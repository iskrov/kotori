# [3-3] Backend read/write path updates

## Description
Update backend journal read/write paths to handle per-user encryption metadata: accept encrypted payloads, decode Base64 to bytes for storage, and return encrypted fields and `is_encrypted` in responses. Remove dependence on `secret_tag` for standard entries.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-08-08 01:12:00 | Status Change | Agreed | InProgress | Started backend service/endpoint updates | ai-agent |
| 2025-08-08 01:26:00 | Status Change | InProgress | Review | Implemented encode/decode and response shaping | ai-agent |

## Requirements
- Create accepts encrypted fields, converts Base64 payloads to BYTEA, stores with user_id.
- Update supports encrypted payloads similarly.
- Get/list returns `is_encrypted`, and encrypted fields in Base64; `content` empty when encrypted.

## Implementation Plan
- Modify `journal_service` create/update/get/list to normalize aliases, decode/encode Base64, and shape responses.
- Adjust `journal` endpoints to validate encrypted vs plaintext payloads.

## Verification
- Manual API calls or integration tests creating encrypted entries return `is_encrypted=true` and ciphertext fields.
- Public entries round-trip unchanged.

## Files Modified
- `backend/app/api/v1/endpoints/journal.py`
- `backend/app/services/journal_service.py`

[Back to task list](../tasks.md)
